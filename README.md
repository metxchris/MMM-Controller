# MMM Explorer

MMM Explorer is a tool that allows for the rapid running and analysis of the MMM Transport Model, using input profiles obtained directly from TRANSP output.  In addition, MMM Explorer comes with a suite of plotting tools that generate publication quality plots of both TRANSP and MMM Transport Model results.  See the [examples](https://github.com/metxchris/MMM-Controller/tree/main/examples) directory for more information on what MMM Explorer provides.

## Installation and Dependencies

#### Required MMM Transport Model Install
* MMM7.2 Transport Model

MMM Explorer was designed to run the MMM Transport Model using the provided [wrapper](https://github.com/metxchris/MMM-Controller/tree/main/wrapper).  The wrapper directory should be placed in the top level of the MMM Transport Model directory, and then the wrapper needs to be be compiled with gfortran via its Makefile, similar to how testmmm is compiled. Note that the wrapper has been optimized to work with MMM Explorer, and is a replacement for testmmm. Additionally, the path to the compiled MMM wrapper must be specified in the [settings](https://github.com/metxchris/MMM-Controller/blob/main/settings.py) file.

#### Recommended MMM Fortran Compiler
* [gfortran (Cygwin)](https://cygwin.com/install.html)

If installing Cygwin, be sure to install components required for both gfortran and make.  If your system already has a gfortran compiler, then Cygwin is not required.  Please see the documentation provided with the MMM Transport Model for more information on compiling MMM7.2.

#### Required TRANSP Data

MMM Explorer generates input profiles for the MMM Transport Model using data generated by [TRANSP](https://transp.pppl.gov/) in the form of CDF files.  CDF files must be placed in the [cdfs](https://github.com/metxchris/MMM-Controller/tree/main/cdfs) directory in order for MMM Explorer to access them.  MMM Explorer has been tested to work with CDF's of both NSTX and DIII-D discharge types, and may not work with CDF's that use a different data format.

#### Recommended Python Install
* [Anaconda](https://www.anaconda.com/products/individual) (Python v3.9)

MMM Explorer was written using Python v3.9, and may not work with older versions of Python.  Additionally, MMM Explorer was written on a Windows OS, and has not been tested on other operating systems.

#### Required 3rd Party Python Packages
* [MatPlotLib](https://https://matplotlib.org/.org/) (Comes with Anaconda)
* [Numpy](https://numpy.org/) (Comes with Anaconda)
* [Scipy](https://scipy.org/) (Comes with Anaconda)
* [netCDF4](https://unidata.github.io/netcdf4-python/)

`netCDF4` can be installed using the Python Package Index via the following terminal command:
```
pip install netCDF4
```

Note: if the `pip` command does not work, then you likely need to [add Python to your Path](https://datatofish.com/add-python-to-windows-path/) (Windows OS).


#### Required 3rd Party Software
* [PDFtk-Server](https://www.pdflabs.com/tools/pdftk-server/)

PDFtk-Server is used to merge the many individual PDF sheets created by MMM Explorer into single PDF's.  Both the PDFtk executable and its library file should be placed directly in the [pdftk directory](https://github.com/metxchris/MMM-Controller/tree/main/pdftk).

#### Recommended Text Editor
* [Sublime Text](https://www.sublimetext.com/)

Sublime Text allows MMM Explorer to be ran easily, without the need for terminal commands.  In order to run Python via Sublime Text, we recommend making a new build system using `Tools > Build System > New Build System` as follows:
```
{
    "cmd": ["c:/programdata/anaconda3/python.exe", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python",
    "shell": true
}
```
Note that the `"cmd"` line should point to your Python executable.  Additionally, the `"shell"` line is required for MatPlotLib plots to appear while using Sublime Text (Sublime Text suppresses plot generation by default).
